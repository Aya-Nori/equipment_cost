<!-- python 100本ノック 学習用のファイル -->

<!--

///   knock11   ///  データ読み込み、データ確認

import os
from google.colab import drive
drive.mount('/content/drive')

データの確認 データの揺れの確認
フォーマット、表記の一致を確認する

import pandas as pd
uriage_data = pd.read_csv('/content/drive/My Drive/100knock/uriage.csv')
uriage_data.head()

kokyaku_data = pd.read_excel("/content/drive/My Drive/100knock/kokyaku_daicho.xlsx")
kokyaku_data.head()


/// /// /// /// ///



///   knock12   ///   データの揺れ確認


データの確認 データの揺れの確認
フォーマット、表記の一致を確認する

uriage_data["item_name"].head()

uriage_data["item_price"].head()

/// /// /// /// ///



///   knock13   ///   仮集計

uriage_data["purchase_date"] = pd.to_datetime(uriage_data["purchase_date"])
uriage_data["purchase_month"] = uriage_data["purchase_date"].dt.strftime("%Y%m")
res = uriage_data.pivot_table(index = "purchase_month", columns = "item_name", aggfunc = "size", fill_value = 0)
res

売上履歴から商品ごとの月別売り上げ合計を集計
日付型の変換
uriage_data["purchase_date"] = pd.to_datetime(uriage_data["purchase_date"])
uriage_data["purchase_month"] = uriage_data["purchase_date"].dt.strftime("%Y%m")

縦軸：購入年月、横軸：商品件数
res = uriage_data.pivot_table(index = "purchase_month", columns = "item_name", aggfunc = "size", fill_value = 0)

集計結果表示
res

7 rows × 99 columns　という表示から、26columsよりも多く、色んな表記があって統一できていないことがわかる

/// /// /// /// ///



///   knock14   ///   データ揺れ補正
print(len(pd.unique(uriage_data["item_name"])))

ユニーク数の確認
print(len(pd.unique(uriage_data["item_name"])))


uriage_data["item_name"] = uriage_data["item_name"].str.upper()
uriage_data["item_name"] = uriage_data["item_name"].str.replace("　", "")
uriage_data["item_name"] = uriage_data["item_name"].str.replace(" ", "")
uriage_data.sort_values(by = ["item_name"], ascending = True)

小文字→大文字
uriage_data["item_name"] = uriage_data["item_name"].str.upper()

半角全角スペース除去
uriage_data["item_name"] = uriage_data["item_name"].str.replace("　", "")
uriage_data["item_name"] = uriage_data["item_name"].str.replace(" ", "")

データソート
uriage_data.sort_values(by = ["item_name"], ascending = True)


print(pd.unique(uriage_data["item_name"]))
print(len(pd.unique(uriage_data["item_name"])))


一覧表示により、結果を検証する
print(pd.unique(uriage_data["item_name"]))

ユニーク数の確認
print(len(pd.unique(uriage_data["item_name"])))


/// /// /// /// ///



-->